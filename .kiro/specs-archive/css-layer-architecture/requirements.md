# Requirements Document

## Introduction

This document specifies the requirements for migrating the CSS architecture to properly integrate Tailwind v4 with the existing Toastmasters brand CSS. The migration addresses conflicts where custom brand CSS overrides Tailwind utilities, preventing predictable styling behavior. The solution must maintain WCAG AA accessibility compliance and Toastmasters brand guidelines while enabling Tailwind utilities to work as expected.

## Glossary

- **CSS_Layer**: A CSS cascade layer (`@layer`) that controls the order in which styles are applied, allowing lower-priority layers to be overridden by higher-priority layers
- **Brand_CSS**: Custom CSS implementing Toastmasters brand guidelines including colors, typography, spacing, and accessibility requirements
- **Tailwind_Utility**: A single-purpose CSS class generated by Tailwind CSS (e.g., `h-8`, `text-lg`, `font-sans`)
- **Touch_Target**: An interactive element's minimum clickable/tappable area, required to be 44px minimum per WCAG AA guidelines
- **Element_Selector**: A CSS selector targeting HTML elements directly (e.g., `button`, `a`, `p`) rather than classes
- **Design_Token**: A CSS custom property storing a design value (e.g., `--tm-loyal-blue`, `--tm-font-headline`)
- **Specificity_Conflict**: A situation where CSS rules compete based on selector specificity, causing unexpected style application

## Requirements

### Requirement 1: CSS Layer Architecture

**User Story:** As a developer, I want CSS organized into cascade layers, so that Tailwind utilities can predictably override brand defaults when explicitly applied.

#### Acceptance Criteria

1. THE CSS_Architecture SHALL define a `base` layer for element-level defaults and resets
2. THE CSS_Architecture SHALL define a `brand` layer for Toastmasters brand component classes
3. THE CSS_Architecture SHALL define a `utilities` layer for Tailwind utility classes
4. WHEN layers are defined, THE CSS_Architecture SHALL order them as: base → brand → utilities (lowest to highest priority)
5. THE CSS_Architecture SHALL ensure Tailwind utilities in the `utilities` layer can override styles in lower layers

### Requirement 2: Element Selector Refactoring

**User Story:** As a developer, I want element-level styles moved to a base layer, so that Tailwind utilities can override them without specificity conflicts.

#### Acceptance Criteria

1. WHEN element selectors set `min-height` or `min-width` on interactive elements, THE Refactored_CSS SHALL move these rules to the `base` layer
2. WHEN element selectors set `font-family` on common elements, THE Refactored_CSS SHALL move these rules to the `base` layer
3. WHEN element selectors set `line-height` on common elements, THE Refactored_CSS SHALL move these rules to the `base` layer
4. THE Refactored_CSS SHALL NOT use element selectors in the `brand` layer for properties that Tailwind utilities commonly override
5. WHEN a Tailwind_Utility class is applied to an element, THE Tailwind_Utility SHALL override the corresponding base layer property

### Requirement 3: Duplicate Definition Consolidation

**User Story:** As a developer, I want each brand class defined in exactly one location, so that styles are maintainable and predictable.

#### Acceptance Criteria

1. THE Consolidated_CSS SHALL define each `.tm-*` class in exactly one file
2. WHEN `.tm-headline`, `.tm-body`, `.tm-h1`, `.tm-h2`, `.tm-h3` classes exist in multiple files, THE Consolidated_CSS SHALL remove duplicates and retain definitions in the component files only
3. THE Consolidated_CSS SHALL remove duplicate class definitions from `index.css` that are already defined in component files
4. THE Consolidated_CSS SHALL remove duplicate class definitions from `brand.css` that are already defined in component files
5. WHEN a design token is referenced, THE Consolidated_CSS SHALL reference tokens defined in `tokens/*.css` files only

### Requirement 4: Accessibility Constraint Preservation

**User Story:** As a developer, I want accessibility requirements enforced by default but overridable when needed, so that I can maintain WCAG AA compliance while having flexibility for edge cases.

#### Acceptance Criteria

1. THE Accessible_CSS SHALL set 44px minimum touch targets on interactive elements in the `base` layer
2. WHEN a developer applies an explicit Tailwind size utility (e.g., `h-8`, `min-h-0`), THE Tailwind_Utility SHALL override the base layer touch target
3. THE Accessible_CSS SHALL provide a `.tm-touch-target` utility class that explicitly enforces 44px minimum dimensions
4. THE Accessible_CSS SHALL maintain minimum 14px body text size as a base layer default
5. THE Accessible_CSS SHALL maintain minimum 1.4 line-height ratio as a base layer default
6. WHEN a developer applies explicit Tailwind typography utilities, THE Tailwind_Utility SHALL override base layer typography defaults

### Requirement 5: Brand Typography Integration

**User Story:** As a developer, I want brand fonts applied by default but overridable with Tailwind utilities, so that I can use brand typography while having flexibility for special cases.

#### Acceptance Criteria

1. THE Brand_Typography SHALL set Montserrat as the default headline font in the `base` layer
2. THE Brand_Typography SHALL set Source Sans 3 as the default body font in the `base` layer
3. WHEN a developer applies `font-sans`, `font-serif`, or `font-mono` Tailwind utilities, THE Tailwind_Utility SHALL override the base layer font-family
4. THE Brand_Typography SHALL NOT use `!important` declarations that prevent Tailwind overrides
5. THE Brand_Typography SHALL preserve `text-shadow: none` enforcement on `.tm-*` typography classes per brand guidelines

### Requirement 6: Component Class Flexibility

**User Story:** As a developer, I want brand component classes to provide sensible defaults that can be extended with Tailwind utilities, so that I can customize components without fighting the CSS.

#### Acceptance Criteria

1. WHEN `.tm-btn-primary` or `.tm-btn-secondary` classes are used, THE Component_CSS SHALL allow Tailwind padding utilities to override default padding
2. WHEN `.tm-nav-item` class is used, THE Component_CSS SHALL allow Tailwind padding utilities to override default padding
3. THE Component_CSS SHALL NOT set `box-shadow: none` on typography classes that would block Tailwind shadow utilities
4. WHEN `.tm-card` class is used, THE Component_CSS SHALL allow Tailwind padding and shadow utilities to extend or override defaults
5. THE Component_CSS SHALL place component class definitions in the `brand` layer

### Requirement 7: Responsive Style Compatibility

**User Story:** As a developer, I want responsive brand styles to work alongside Tailwind responsive utilities, so that I can use either approach without conflicts.

#### Acceptance Criteria

1. WHEN responsive media queries set `min-height` on interactive elements, THE Responsive_CSS SHALL place these rules in the `base` layer
2. WHEN responsive media queries set `font-size` on buttons, THE Responsive_CSS SHALL allow Tailwind responsive text utilities to override
3. THE Responsive_CSS SHALL NOT use element selectors with fixed `padding` values that block Tailwind padding utilities
4. WHEN `.tm-btn-responsive` class is used, THE Responsive_CSS SHALL allow Tailwind utilities to extend or override responsive defaults

### Requirement 8: Import Order and Structure

**User Story:** As a developer, I want a clear import structure that establishes proper layer ordering, so that the CSS cascade behaves predictably.

#### Acceptance Criteria

1. THE Import_Structure SHALL declare `@layer` order before any style imports
2. THE Import_Structure SHALL import Tailwind CSS before custom brand CSS
3. THE Import_Structure SHALL import token files before component files
4. THE Import_Structure SHALL import component files before responsive styles
5. WHEN `index.css` is processed, THE Import_Structure SHALL result in utilities layer having highest cascade priority
