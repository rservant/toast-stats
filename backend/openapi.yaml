swagger: '2.0'
info:
  title: Toast Stats API Gateway
  description: |
    API Gateway for Toast-Stats - Toastmasters District Statistics and Analytics.
    
    This gateway routes requests to the Cloud Run backend with explicit endpoint
    definitions for parameter validation and documentation.
  version: '2.0.0'

schemes:
  - https

basePath: /api

host: toast-stats-18majkbqxtagv.apigateway.toast-stats-prod-6d64a.cloud.goog

# CORS configuration
x-google-endpoints:
  - name: toast-stats-18majkbqxtagv.apigateway.toast-stats-prod-6d64a.cloud.goog
    allowCors: true

# Security definition (not required for operations)
securityDefinitions:
  api_key:
    type: apiKey
    name: key
    in: query

paths:
  # ============================================================================
  # HEALTH CHECK ENDPOINT
  # ============================================================================

  /health:
    get:
      summary: Health check endpoint
      operationId: healthCheck
      tags:
        - Health
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app/health
        path_translation: CONSTANT_ADDRESS
      produces:
        - application/json
      responses:
        '200':
          description: Service is healthy
        '503':
          description: Service unavailable

  # ============================================================================
  # DISTRICT ENDPOINTS
  # ============================================================================

  /districts:
    get:
      summary: List all districts
      operationId: getDistricts
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      responses:
        '200':
          description: Successfully retrieved list of districts
        '404':
          description: No data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/rankings:
    get:
      summary: Get global district rankings
      operationId: getDistrictRankings
      tags:
        - Rankings
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: date
          in: query
          type: string
          format: date
          description: Date for rankings snapshot (YYYY-MM-DD format)
          required: false
        - name: fallback
          in: query
          type: boolean
          description: Whether to fall back to nearest available snapshot
          required: false
          default: true
      responses:
        '200':
          description: Successfully retrieved district rankings
        '400':
          description: Bad request - invalid date format
        '404':
          description: No data available for requested date
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/cache/dates:
    get:
      summary: Get all cached dates across all districts
      operationId: getAllCachedDates
      tags:
        - Cache
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      responses:
        '200':
          description: Successfully retrieved cached dates
        '404':
          description: No cached data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/backfill:
    post:
      summary: Start a multi-district backfill operation
      operationId: startMultiDistrictBackfill
      tags:
        - Backfill
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              targetDistricts:
                type: array
                items:
                  type: string
                description: Array of district IDs to backfill
              startDate:
                type: string
                format: date
                description: Start date for backfill (YYYY-MM-DD)
              endDate:
                type: string
                format: date
                description: End date for backfill (YYYY-MM-DD)
              collectionType:
                type: string
                enum:
                  - full
                  - incremental
                  - rankings_only
                description: Type of data collection
              concurrency:
                type: integer
                minimum: 1
                maximum: 10
                description: Number of concurrent operations
            required:
              - targetDistricts
              - startDate
              - endDate
      responses:
        '202':
          description: Backfill operation accepted and started
        '400':
          description: Bad request - invalid parameters
        '409':
          description: Conflict - backfill already in progress
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/backfill/{backfillId}:
    get:
      summary: Get backfill operation status
      operationId: getBackfillStatus
      tags:
        - Backfill
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: backfillId
          in: path
          type: string
          required: true
          description: Unique identifier for the backfill operation
      responses:
        '200':
          description: Successfully retrieved backfill status
        '404':
          description: Backfill operation not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable
    delete:
      summary: Cancel a backfill operation
      operationId: cancelBackfill
      tags:
        - Backfill
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: backfillId
          in: path
          type: string
          required: true
          description: Unique identifier for the backfill operation
      responses:
        '200':
          description: Backfill operation cancelled
        '404':
          description: Backfill operation not found
        '409':
          description: Conflict - backfill cannot be cancelled (already completed or failed)
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/statistics:
    get:
      summary: Get district statistics
      operationId: getDistrictStatistics
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: date
          in: query
          type: string
          format: date
          description: Date for statistics snapshot (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully retrieved district statistics
        '400':
          description: Bad request - invalid district ID or date format
        '404':
          description: District or snapshot not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/clubs:
    get:
      summary: Get clubs in a district
      operationId: getDistrictClubs
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
      responses:
        '200':
          description: Successfully retrieved clubs for the district
        '400':
          description: Bad request - invalid district ID
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/membership-history:
    get:
      summary: Get district membership history
      operationId: getDistrictMembershipHistory
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: months
          in: query
          type: integer
          minimum: 1
          maximum: 24
          default: 6
          description: Number of months of history to retrieve
          required: false
      responses:
        '200':
          description: Successfully retrieved membership history
        '400':
          description: Bad request - invalid district ID or months parameter
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/educational-awards:
    get:
      summary: Get district educational awards
      operationId: getDistrictEducationalAwards
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: months
          in: query
          type: integer
          minimum: 1
          maximum: 24
          default: 6
          description: Number of months of history to retrieve
          required: false
      responses:
        '200':
          description: Successfully retrieved educational awards
        '400':
          description: Bad request - invalid district ID or months parameter
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/daily-reports:
    get:
      summary: Get district daily reports
      operationId: getDistrictDailyReports
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: startDate
          in: query
          type: string
          format: date
          required: true
          description: Start date for report range (YYYY-MM-DD format)
        - name: endDate
          in: query
          type: string
          format: date
          required: true
          description: End date for report range (YYYY-MM-DD format)
      responses:
        '200':
          description: Successfully retrieved daily reports
        '400':
          description: Bad request - invalid parameters or date range
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/daily-reports/{date}:
    get:
      summary: Get district daily report for specific date
      operationId: getDistrictDailyReportByDate
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: date
          in: path
          type: string
          format: date
          required: true
          description: Report date (YYYY-MM-DD format)
      responses:
        '200':
          description: Successfully retrieved daily report
        '400':
          description: Bad request - invalid district ID or date format
        '404':
          description: District or report not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/rank-history:
    get:
      summary: Get district rank history
      operationId: getDistrictRankHistory
      tags:
        - Rankings
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: startDate
          in: query
          type: string
          format: date
          description: Start date for history range (YYYY-MM-DD format)
          required: false
        - name: endDate
          in: query
          type: string
          format: date
          description: End date for history range (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully retrieved rank history
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/available-ranking-years:
    get:
      summary: Get available ranking years for district
      operationId: getDistrictAvailableRankingYears
      tags:
        - Rankings
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
      responses:
        '200':
          description: Successfully retrieved available ranking years
        '400':
          description: Bad request - invalid district ID
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/cached-dates:
    get:
      summary: Get cached dates for district
      operationId: getDistrictCachedDates
      tags:
        - Cache
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
      responses:
        '200':
          description: Successfully retrieved cached dates
        '400':
          description: Bad request - invalid district ID
        '404':
          description: District not found or no cached data
        '500':
          description: Internal server error
        '503':
          description: Service unavailable


  # ============================================================================
  # ANALYTICS ENDPOINTS
  # ============================================================================

  /districts/{districtId}/analytics:
    get:
      summary: Get district analytics
      operationId: getDistrictAnalytics
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: startDate
          in: query
          type: string
          format: date
          description: Start date for analytics range (YYYY-MM-DD format)
          required: false
        - name: endDate
          in: query
          type: string
          format: date
          description: End date for analytics range (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully retrieved district analytics
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/membership-analytics:
    get:
      summary: Get district membership analytics
      operationId: getDistrictMembershipAnalytics
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: startDate
          in: query
          type: string
          format: date
          description: Start date for analytics range (YYYY-MM-DD format)
          required: false
        - name: endDate
          in: query
          type: string
          format: date
          description: End date for analytics range (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully retrieved membership analytics
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/clubs/{clubId}/trends:
    get:
      summary: Get club trends
      operationId: getClubTrends
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: clubId
          in: path
          type: string
          required: true
          description: Club identifier
      responses:
        '200':
          description: Successfully retrieved club trends
        '400':
          description: Bad request - invalid district ID or club ID
        '404':
          description: District or club not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/vulnerable-clubs:
    get:
      summary: Get vulnerable clubs in district
      operationId: getVulnerableClubs
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
      responses:
        '200':
          description: Successfully retrieved vulnerable clubs
        '400':
          description: Bad request - invalid district ID
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/leadership-insights:
    get:
      summary: Get leadership insights for district
      operationId: getLeadershipInsights
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: startDate
          in: query
          type: string
          format: date
          description: Start date for insights range (YYYY-MM-DD format)
          required: false
        - name: endDate
          in: query
          type: string
          format: date
          description: End date for insights range (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully retrieved leadership insights
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/distinguished-club-analytics:
    get:
      summary: Get distinguished club analytics
      operationId: getDistinguishedClubAnalytics
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: startDate
          in: query
          type: string
          format: date
          description: Start date for analytics range (YYYY-MM-DD format)
          required: false
        - name: endDate
          in: query
          type: string
          format: date
          description: End date for analytics range (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully retrieved distinguished club analytics
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/year-over-year/{date}:
    get:
      summary: Get year-over-year comparison
      operationId: getYearOverYearComparison
      tags:
        - Analytics
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: date
          in: path
          type: string
          format: date
          required: true
          description: Comparison date (YYYY-MM-DD format)
      responses:
        '200':
          description: Successfully retrieved year-over-year comparison
        '400':
          description: Bad request - invalid district ID or date format
        '404':
          description: District not found or insufficient historical data
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/export:
    get:
      summary: Export district data
      operationId: exportDistrictData
      tags:
        - Districts
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
        - text/csv
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: format
          in: query
          type: string
          enum:
            - json
            - csv
          default: json
          description: Export format
          required: false
        - name: startDate
          in: query
          type: string
          format: date
          description: Start date for export range (YYYY-MM-DD format)
          required: false
        - name: endDate
          in: query
          type: string
          format: date
          description: End date for export range (YYYY-MM-DD format)
          required: false
      responses:
        '200':
          description: Successfully exported district data
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found or no data available
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  # ============================================================================
  # DISTRICT-SPECIFIC BACKFILL ENDPOINTS
  # ============================================================================

  /districts/{districtId}/backfill:
    post:
      summary: Start a single-district backfill operation
      operationId: startDistrictBackfill
      tags:
        - Backfill
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              startDate:
                type: string
                format: date
                description: Start date for backfill (YYYY-MM-DD)
              endDate:
                type: string
                format: date
                description: End date for backfill (YYYY-MM-DD)
            required:
              - startDate
              - endDate
      responses:
        '202':
          description: Backfill operation accepted and started
        '400':
          description: Bad request - invalid parameters
        '404':
          description: District not found
        '409':
          description: Conflict - backfill already in progress for this district
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /districts/{districtId}/backfill/{backfillId}:
    get:
      summary: Get district-specific backfill status
      operationId: getDistrictBackfillStatus
      tags:
        - Backfill
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: backfillId
          in: path
          type: string
          required: true
          description: Unique identifier for the backfill operation
      responses:
        '200':
          description: Successfully retrieved backfill status
        '400':
          description: Bad request - invalid district ID or backfill ID
        '404':
          description: District or backfill operation not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable
    delete:
      summary: Cancel a district-specific backfill operation
      operationId: cancelDistrictBackfill
      tags:
        - Backfill
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier (e.g., "57", "F")
        - name: backfillId
          in: path
          type: string
          required: true
          description: Unique identifier for the backfill operation
      responses:
        '200':
          description: Backfill operation cancelled
        '400':
          description: Bad request - invalid district ID or backfill ID
        '404':
          description: District or backfill operation not found
        '409':
          description: Conflict - backfill cannot be cancelled
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  # ============================================================================
  # ADMIN ENDPOINTS
  # ============================================================================

  /admin/snapshots:
    get:
      summary: List snapshots
      operationId: listSnapshots
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: limit
          in: query
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          description: Maximum number of snapshots to return
          required: false
        - name: status
          in: query
          type: string
          enum:
            - success
            - failed
            - partial
          description: Filter by snapshot status
          required: false
        - name: schema_version
          in: query
          type: string
          description: Filter by schema version
          required: false
        - name: calculation_version
          in: query
          type: string
          description: Filter by calculation version
          required: false
        - name: created_after
          in: query
          type: string
          format: date-time
          description: Filter snapshots created after this timestamp
          required: false
        - name: created_before
          in: query
          type: string
          format: date-time
          description: Filter snapshots created before this timestamp
          required: false
        - name: min_district_count
          in: query
          type: integer
          minimum: 1
          description: Filter by minimum district count
          required: false
      responses:
        '200':
          description: Successfully retrieved snapshots list
        '400':
          description: Bad request - invalid query parameters
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /admin/snapshots/{snapshotId}:
    get:
      summary: Get snapshot details
      operationId: getSnapshotDetails
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: snapshotId
          in: path
          type: string
          required: true
          description: Unique identifier for the snapshot
      responses:
        '200':
          description: Successfully retrieved snapshot details
        '400':
          description: Bad request - invalid snapshot ID
        '404':
          description: Snapshot not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /admin/snapshots/{snapshotId}/payload:
    get:
      summary: Get snapshot payload
      operationId: getSnapshotPayload
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: snapshotId
          in: path
          type: string
          required: true
          description: Unique identifier for the snapshot
      responses:
        '200':
          description: Successfully retrieved snapshot payload
        '400':
          description: Bad request - invalid snapshot ID
        '404':
          description: Snapshot not found
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  # ============================================================================
  # ADMIN DISTRICT CONFIGURATION ENDPOINTS
  # ============================================================================

  /admin/districts/config:
    get:
      summary: Get district configuration
      operationId: getDistrictConfig
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      responses:
        '200':
          description: Successfully retrieved district configuration
        '500':
          description: Internal server error
        '503':
          description: Service unavailable
    post:
      summary: Add or replace districts in configuration
      operationId: updateDistrictConfig
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              districtIds:
                type: array
                items:
                  type: string
                description: Array of district IDs to add or set
              replace:
                type: boolean
                default: false
                description: If true, replace entire configuration; if false, add to existing
            required:
              - districtIds
      responses:
        '200':
          description: Successfully updated district configuration
        '400':
          description: Bad request - invalid district IDs
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /admin/districts/config/{districtId}:
    delete:
      summary: Remove a district from configuration
      operationId: removeDistrictFromConfig
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: districtId
          in: path
          type: string
          required: true
          description: District identifier to remove
      responses:
        '200':
          description: Successfully removed district from configuration
        '400':
          description: Bad request - invalid district ID
        '404':
          description: District not found in configuration
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /admin/districts/config/validate:
    post:
      summary: Validate district configuration
      operationId: validateDistrictConfig
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: body
          in: body
          required: false
          schema:
            type: object
            properties:
              allDistrictIds:
                type: array
                items:
                  type: string
                description: Optional list of all valid district IDs to validate against
      responses:
        '200':
          description: Successfully validated district configuration
        '500':
          description: Internal server error
        '503':
          description: Service unavailable

  /admin/districts/config/history:
    get:
      summary: Get district configuration change history
      operationId: getDistrictConfigHistory
      tags:
        - Admin
      x-google-backend:
        address: https://toast-stats-api-736334703361.us-east1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      produces:
        - application/json
      parameters:
        - name: limit
          in: query
          type: integer
          minimum: 1
          maximum: 100
          default: 50
          description: Maximum number of history entries to return
          required: false
        - name: start_date
          in: query
          type: string
          format: date
          description: Filter history entries after this date
          required: false
        - name: end_date
          in: query
          type: string
          format: date
          description: Filter history entries before this date
          required: false
        - name: include_summary
          in: query
          type: boolean
          default: false
          description: Include summary statistics in response
          required: false
      responses:
        '200':
          description: Successfully retrieved configuration history
        '400':
          description: Bad request - invalid query parameters
        '500':
          description: Internal server error
        '503':
          description: Service unavailable
